# WSL2 Optimization Script for Debian 12/13

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ WSL2 –¥–ª—è Debian 12/13 (Bookworm/Trixie) —Å Zsh + Starship + Go + Node.js/NVM.

**üÜï –í–µ—Ä—Å–∏—è 2.5.0** - –î–æ–±–∞–≤–ª–µ–Ω—ã Go –∏ Node.js/NVM, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.
**üì¶ –í–µ—Ä—Å–∏—è 2.0.0** - –ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∏–µ —Å –Ω—É–ª—è, –∑–∞–º–µ–Ω–∞ Fish –Ω–∞ Zsh, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ WSL2-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

## üöÄ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üêß WSL2-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **systemd –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å systemd
- **wsl.conf –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ WSL2
- **Windows –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Windows –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —Ç—é–Ω–∏–Ω–≥ –ø–∞–º—è—Ç–∏, —Å–µ—Ç–∏, —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ Docker** - –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ WSL2

### üõ†Ô∏è –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Shell (Zsh + Starship)
- **Zsh** –≤–º–µ—Å—Ç–æ Fish shell - –±–æ–ª–µ–µ –º–æ—â–Ω—ã–π –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π
- **Starship prompt** - –∫—Ä–∞—Å–∏–≤—ã–π –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- **–ü–ª–∞–≥–∏–Ω—ã Zsh** - –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞, –ø–æ–¥—Å–∫–∞–∑–∫–∏
- **WSL2 —Ñ—É–Ω–∫—Ü–∏–∏** - `explorer()`, `cmd()`, `powershell()`, `wslperf()`

### üíª –Ø–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Go** - –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π SHA256
- **Node.js** - LTS –≤–µ—Ä—Å–∏—è —á–µ—Ä–µ–∑ NVM (Node Version Manager)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ Node.js

### üê≥ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Docker CE** - –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è —Å Docker Compose
- **NVIDIA Container Toolkit** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ GPU –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- **CUDA Toolkit** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è sysctl** - BBR, –ª–∏–º–∏—Ç—ã, —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **I/O –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è SSD/NVMe
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é** - swappiness, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **WSL2** —Å Windows 10/11
- **Debian 12/13** (Bookworm/Trixie)
- **–ü—Ä–∞–≤–∞ sudo** –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- **–ú–∏–Ω–∏–º—É–º 4GB RAM** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8GB+)

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Windows

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `%USERPROFILE%\.wslconfig`:

```ini
[wsl2]
memory=8GB
processors=4
autoMemoryReclaim=dropCache
sparseVhd=true
swap=2GB
dnsTunneling=true
networkingMode=mirrored
guiApplications=true

[experimental]
autoMemoryReclaim=dropCache
sparseVhd=true
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ WSL

–í PowerShell (–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):

```powershell
wsl --update
wsl --set-default-version 2
```

### 3. –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞

```bash
# –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (bash + curl)
bash <(curl -s https://raw.githubusercontent.com/snaplyze/optimize-linux/refs/heads/main/optimize_wsl2.sh)

# –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
wget https://raw.githubusercontent.com/snaplyze/optimize-linux/refs/heads/main/optimize_wsl2.sh

# –°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x optimize_wsl2.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ç –∏–º–µ–Ω–∏ root
sudo ./optimize_wsl2.sh
```

## üéØ –≠—Ç–∞–ø—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç 17 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –º–µ–Ω—é:

### –≠—Ç–∞–ø 1-7: –°–∏—Å—Ç–µ–º–∞ –∏ Shell
- **Step 1:** –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- **Step 2:** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Step 3:** WSL2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (wsl.conf + systemd, –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Docker)
- **Step 4:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏ –±–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
- **Step 5:** –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å sudo –ø—Ä–∞–≤–∞–º–∏
- **Step 6:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª–µ–π (ru_RU, en_US)
- **Step 7:** Zsh + Starship (–∑–∞–º–µ–Ω–∞ Fish shell)

### –≠—Ç–∞–ø 8-10: –Ø–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Step 8:** Go —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è, SHA256 –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)
- **Step 9:** Node.js + NVM (LTS –≤–µ—Ä—Å–∏—è, –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ Zsh)
- **Step 10:** SSH agent –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –≠—Ç–∞–ø 11-12: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Step 11:** Docker CE + Docker Compose
- **Step 12:** NVIDIA Container Toolkit + CUDA Toolkit (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –≠—Ç–∞–ø 13-17: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- **Step 13:** Performance tuning (sysctl, –ª–∏–º–∏—Ç—ã, I/O)
- **Step 14:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Step 15:** –°–æ–∑–¥–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **Step 16:** –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
- **Step 17:** –ò—Ç–æ–≥–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

## üé® Zsh + Starship –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Zsh –ø–ª–∞–≥–∏–Ω—ã
- **zsh-autosuggestions** - –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∫–æ–º–∞–Ω–¥ –∫–∞–∫ –≤ Fish
- **zsh-syntax-highlighting** - –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- **zsh-completions** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è

### Starship prompt
- üå± Git —Å—Ç–∞—Ç—É—Å –∏ –≤–µ—Ç–∫–∞
- üêã Docker –∫–æ–Ω—Ç–µ–∫—Å—Ç
- üêç Python, ‚¨¢ Node.js, üêπ Go, ü¶Ä Rust –≤–µ—Ä—Å–∏–∏
- ‚è∞ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
- üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

### WSL2-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```bash
# –û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É –≤ Windows Explorer
explorer /path/to/folder

# –í—ã–ø–æ–ª–Ω–∏—Ç—å Windows –∫–æ–º–∞–Ω–¥—É
cmd dir
powershell Get-Process

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ WSL2
wslperf
```

### –ê–ª–∏–∞—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏
```bash
# Docker
d='docker'
dc='docker compose'
dps='docker ps'
dcl='docker compose logs -f'

# Git
g='git'
gs='git status'
gcm='git commit -m'
gl='git log --oneline --graph'

# –°–∏—Å—Ç–µ–º–∞
ll='ls -alFh'
update='sudo apt update && sudo apt upgrade -y'
meminfo='free -h'
```

## üêπ Go –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ —Å go.dev
- SHA256 –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ `/usr/local/go`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PATH

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
# Go —Å—Ä–∞–∑—É –¥–æ—Å—Ç—É–ø–µ–Ω
go version
go mod init example.com/hello

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
$GOPATH=$HOME/go
$PATH –≤–∫–ª—é—á–∞–µ—Ç /usr/local/go/bin –∏ $GOPATH/bin
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `/etc/profile.d/golang.sh` - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö shells
- `~/.zshrc` - –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Zsh (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è)

## ‚¨¢ Node.js —Å NVM

### NVM —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- Node Version Manager (NVM) v0.39.7
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è root –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Zsh

### Node.js –≤–µ—Ä—Å–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π LTS –≤–µ—Ä—Å–∏–∏
- –ü—Ä–æ—Å—Ç–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏: `nvm use 18`, `nvm use 20`
- npm install —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó sudo

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
node --version
npm --version

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏
nvm list                    # –°–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π
nvm install 18             # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é
nvm use 18                 # –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤–µ—Ä—Å–∏—é 18
nvm alias default 18       # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

# npm –±–µ–∑ sudo
npm install -g some-package   # –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ sudo –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!
npm install                    # –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –ø—Ä–æ–µ–∫—Ç
```

### NVM –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```bash
# ~/.zshrc –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç:
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"
```

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# Go –ø—Ä–æ–µ–∫—Ç
go mod init github.com/user/project
go get github.com/gorilla/mux
go run main.go

# Node.js –ø—Ä–æ–µ–∫—Ç
npm init -y
npm install express
npm start

# Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker build -t myapp .
docker run -p 8000:8000 myapp

# GPU —Å NVIDIA
docker run --gpus all nvidia/cuda:12.3.1-runtime-ubuntu22.04 nvidia-smi
```

## üê≥ Docker –∏ NVIDIA

### Docker –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **overlay2 storage driver** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–æ–≤
- **–ø—É–ª—ã –∞–¥—Ä–µ—Å–æ–≤** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∏
- **BuildKit** - —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏

### NVIDIA –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **GPU –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ /dev/dxg
- **Container Toolkit** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Docker
- **CUDA Toolkit** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö GPU

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
# BBR congestion control
net.ipv4.tcp_congestion_control = bbr
net.core.default_qdisc = fq

# –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –±—É—Ñ–µ—Ä—ã
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
```

### –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
```bash
# –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã —Ñ–∞–π–ª–æ–≤
fs.file-max = 2097152
fs.inotify.max_user_watches = 524288

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏
vm.swappiness = 10
vm.vfs_cache_pressure = 50
```

### I/O –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏
```bash
# SSD –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
ACTION=="add|change", KERNEL=="sd[a-z]", ATTR{queue/rotational}=="0", ATTR{queue/scheduler}="mq-deadline"
# NVMe –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
ACTION=="add|change", KERNEL=="nvme[0-9]n[0-9]", ATTR{queue/rotational}=="0", ATTR{queue/scheduler}="none"
```

## üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞

### wsl2-monitor.sh
–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã WSL2:
```bash
wsl2-monitor.sh
```
- –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/–ø–∞–º—è—Ç–∏/–¥–∏—Å–∫–∞
- WSL2 —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- Top –ø—Ä–æ—Ü–µ—Å—Å—ã

### wsl2-cleanup.sh
–û—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã:
```bash
wsl2-cleanup.sh
```
- –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ø–∞–∫–µ—Ç–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
- –û—á–∏—Å—Ç–∫–∞ Docker
- –£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### wsl2-backup.sh
–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
wsl2-backup.sh [username]
```
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Windows

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### /etc/wsl.conf
```ini
[boot]
systemd=true
command="service docker start"

[automount]
enabled=true
root=/
options="metadata,case=dir,uid=1000,gid=1000,umask=022,fmask=111"

[network]
generateHosts=true
hostname=debian-wsl

[interop]
enabled=true
appendWindowsPath=true

[user]
default=snaplyze
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- `case=dir` –≤ `options` –≤–∫–ª—é—á–∞–µ—Ç directory-level case sensitivity (–æ–ø—Ü–∏–∏: off, dir, force)
- `default=snaplyze` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Ç—Ä–µ–±—É–µ—Ç `wsl --shutdown`)
- `command="service docker start"` –∑–∞–ø—É—Å–∫–∞–µ—Ç Docker –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ WSL2

### /etc/docker/daemon.json
```json
{
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "10m",
    "max-file": "3"
  },
  "storage-driver": "overlay2",
  "default-address-pools": [
    {
      "base": "172.17.0.0/12",
      "size": 24
    }
  ],
  "default-ulimits": {
    "nofile": {
      "Name": "nofile",
      "Hard": 65536,
      "Soft": 65536
    },
    "nproc": {
      "Name": "nproc",
      "Hard": 32768,
      "Soft": 32768
    }
  },
  "features": {
    "buildkit": true
  }
}
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —è–¥–µ—Ä

### –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
wget -O optimize_wsl2.sh https://raw.githubusercontent.com/snaplyze/optimize-linux/refs/heads/main/optimize_wsl2.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
wsl2-monitor.sh

# –û—á–∏—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
wsl2-cleanup.sh
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º—ã —Å systemd
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
sudo systemctl daemon-reload
sudo systemctl restart docker
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Docker
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥—Ä—É–ø–ø—É
groups $USER

# –î–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É
sudo usermod -aG docker $USER

# –ü–µ—Ä–µ–∑–∞–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
newgrp docker
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å GPU
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å GPU
ls -la /dev/dxg
nvidia-smi

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥—Ä–∞–π–≤–µ—Ä—ã Windows
wsl --shutdown
```

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤–µ—Ä—Å–∏–µ–π Fish

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (Fish) | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (Zsh) |
|---------------|---------------------|-------------------|
| Shell | Fish | Zsh |
| Prompt | Starship | Starship (—É–ª—É—á—à–µ–Ω–Ω—ã–π) |
| –ü–ª–∞–≥–∏–Ω—ã | Fisher | Zsh –Ω–∞—Ç–∏–≤–Ω—ã–µ |
| –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è | –ë–∞–∑–æ–≤—ã–µ | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ |
| WSL2 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | –ë–∞–∑–æ–≤–∞—è | –ü–æ–ª–Ω–∞—è |
| systemd –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | –ü–æ–ª–Ω–∞—è |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è |
| NVIDIA –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | –ë–∞–∑–æ–≤–∞—è | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è |

## üìù –õ–æ–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### v2.5.0 (–¢–µ–∫—É—â–∞—è)
- ‚ú® **Go** —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è, SHA256 –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)
- ‚ú® **Node.js + NVM** —Å LTS –≤–µ—Ä—Å–∏–µ–π
- ‚ú® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Go –∏ NVM –≤ .zshrc
- ‚ú® npm install —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó sudo –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ú® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ (wsl.conf, Docker, NVIDIA)
- ‚ú® –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚ú® 17 —ç—Ç–∞–ø–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–º–µ—Å—Ç–æ 16
- ‚ú® –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### v2.0.0
- ‚ú® –ó–∞–º–µ–Ω–∞ Fish shell –Ω–∞ Zsh + Starship
- ‚ú® –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ systemd
- ‚ú® WSL2-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚ú® –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚ú® –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ NVIDIA/CUDA
- ‚ú® –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚ú® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### v1.0.0 (–ê—Ä—Ö–∏–≤)
- üêß Fish shell + Fisher
- üêß –ë–∞–∑–æ–≤–∞—è WSL2 –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- üêß Docker + NVIDIA Container Toolkit
- üêß CUDA Toolkit –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

## ü§ù –°–æ–æ–±—â–µ—Å—Ç–≤–æ

- **GitHub Issues** - —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- **GitHub Discussions** - –≤–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- **Pull Requests** - –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è.

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è WSL2 —Å–æ–æ–±—â–µ—Å—Ç–≤–∞**